*** Begin Patch
*** Update File: app/Http/Controllers/UsuarioController.php
@@ public function index(Request $request)
-        return view('usuarios.index', compact('usuarios', 'roles'));
+        $isPanel = $request->boolean('panel') || $request->header('X-Panel') === '1';
+        if ($isPanel) {
+            // Cuando se solicita vía panel, devolver solo el fragmento sin el layout completo.
+            return view('usuarios._panel', compact('usuarios', 'roles'));
+        }
+        return view('usuarios.index', compact('usuarios', 'roles'));
*** End Patch
*** Begin Patch
*** Update File: app/Http/Controllers/ClienteController.php
@@ public function index(Request $request)
-        $clientes = $q->orderByDesc('id')->paginate(15)->withQueryString();
-
-        return view(self::VIEW.'index', compact('clientes'));
+        $clientes = $q->orderByDesc('id')->paginate(15)->withQueryString();
+
+        $isPanel = $request->boolean('panel') || $request->header('X-Panel') === '1';
+        if ($isPanel) {
+            // Respuesta parcial para el panel de control: devuelve solo el contenido interno.
+            return view(self::VIEW.'_panel', compact('clientes'));
+        }
+
+        return view(self::VIEW.'index', compact('clientes'));
*** End Patch
*** Begin Patch
*** Update File: app/Http/Controllers/EmpresaController.php
@@
-    public function index()
-    {
-        $empresas = Empresa::orderByDesc('id')->paginate(15);
-        return view('adminempresas.index', compact('empresas'));
-    }
+    public function index(Request $request)
+    {
+        $empresas = Empresa::orderByDesc('id')->paginate(15);
+        $isPanel = $request->boolean('panel') || $request->header('X-Panel') === '1';
+        if ($isPanel) {
+            // Respuesta parcial para el panel.
+            return view('adminempresas._panel', compact('empresas'));
+        }
+        return view('adminempresas.index', compact('empresas'));
+    }
*** End Patch
*** Begin Patch
*** Update File: app/Http/Controllers/CategoriaGastoController.php
@@ public function index(Request $request)
-        $categorias = $q->orderBy('nombre')
-            ->paginate(15)
-            ->withQueryString();
-
-        return view('categoria-gastos.index', compact('categorias'));
+        $categorias = $q->orderBy('nombre')
+            ->paginate(15)
+            ->withQueryString();
+
+        $isPanel = $request->boolean('panel') || $request->header('X-Panel') === '1';
+        if ($isPanel) {
+            return view('categoria-gastos._panel', compact('categorias'));
+        }
+
+        return view('categoria-gastos.index', compact('categorias'));
*** End Patch
*** Begin Patch
*** Update File: app/Http/Controllers/SubcategoriaGastoController.php
@@ public function index()
-        // Subcategorías son globales (no dependen de sucursal), por eso no se aplica VisibilityScope aquí.
-        $subcategorias = SubcategoriaGasto::with(['categoria', 'usuario'])
-            ->orderBy('nombre')
-            ->paginate(15);
-
-        return view('subcategoria-gastos.index', compact('subcategorias'));
+        // Subcategorías son globales (no dependen de sucursal), por eso no se aplica VisibilityScope aquí.
+        $subcategorias = SubcategoriaGasto::with(['categoria', 'usuario'])
+            ->orderBy('nombre')
+            ->paginate(15);
+
+        $isPanel = request()->boolean('panel') || request()->header('X-Panel') === '1';
+        if ($isPanel) {
+            return view('subcategoria-gastos._panel', compact('subcategorias'));
+        }
+
+        return view('subcategoria-gastos.index', compact('subcategorias'));
*** End Patch
*** Begin Patch
*** Update File: app/Http/Controllers/CategoriaIngresoController.php
@@ public function index(Request $request)
-        $categorias = $q->orderBy('nombre')
-            ->paginate(15)
-            ->withQueryString();
-
-        return view('categoria-ingresos.index', compact('categorias'));
+        $categorias = $q->orderBy('nombre')
+            ->paginate(15)
+            ->withQueryString();
+
+        $isPanel = $request->boolean('panel') || $request->header('X-Panel') === '1';
+        if ($isPanel) {
+            return view('categoria-ingresos._panel', compact('categorias'));
+        }
+
+        return view('categoria-ingresos.index', compact('categorias'));
*** End Patch
*** Begin Patch
*** Update File: app/Http/Controllers/SubcategoriaIngresoController.php
@@ public function index()
-        $subs = SubcategoriaIngreso::with(['categoria','usuario'])
-               ->orderBy('nombre')
-               ->paginate(15);
-
-        return view('subcategoria-ingresos.index', compact('subs'));
+        $subs = SubcategoriaIngreso::with(['categoria','usuario'])
+               ->orderBy('nombre')
+               ->paginate(15);
+
+        $isPanel = request()->boolean('panel') || request()->header('X-Panel') === '1';
+        if ($isPanel) {
+            return view('subcategoria-ingresos._panel', compact('subs'));
+        }
+
+        return view('subcategoria-ingresos.index', compact('subs'));
*** End Patch
*** Begin Patch
*** Update File: app/Http/Controllers/ProveedorController.php
@@ public function index(Request $request)
-        $proveedores = $query->paginate(15)->withQueryString();
-
-        return view('proveedores.index', [
-            'proveedores' => $proveedores,
-            'search'      => $search,
-            'estado'      => $estado,
-            'orden'       => $orden,
-        ]);
+        $proveedores = $query->paginate(15)->withQueryString();
+
+        $isPanel = $request->boolean('panel') || $request->header('X-Panel') === '1';
+        if ($isPanel) {
+            return view('proveedores._panel', [
+                'proveedores' => $proveedores,
+                'search'      => $search,
+                'estado'      => $estado,
+                'orden'       => $orden,
+            ]);
+        }
+
+        return view('proveedores.index', [
+            'proveedores' => $proveedores,
+            'search'      => $search,
+            'estado'      => $estado,
+            'orden'       => $orden,
+        ]);
*** End Patch
*** Begin Patch
*** Add File: resources/views/usuarios/_panel.blade.php
+{{-- resources/views/usuarios/_panel.blade.php --}}
+<div data-title="Usuarios">
+    {{-- Carga el contenido del índice de usuarios sin el layout. --}}
+    @include('usuarios._content', ['usuarios' => $usuarios, 'roles' => $roles])
+</div>
*** End Patch
*** Begin Patch
*** Add File: resources/views/usuarios/_content.blade.php
+{{-- resources/views/usuarios/_content.blade.php --}}
+{{-- Este archivo debe contener el contenido principal de la vista de usuarios (tabla, filtros, scripts, etc.).
+     Copia aquí todo lo que está dentro del <x-app-layout> de resources/views/usuarios/index.blade.php.
+     Así, el Panel de Control podrá renderizar solo este fragmento sin recargar el layout completo. --}}
*** End Patch
*** Begin Patch
*** Add File: resources/views/adminclientes/_panel.blade.php
+{{-- resources/views/adminclientes/_panel.blade.php --}}
+<div data-title="Clientes">
+    {{-- Contenido del índice de clientes sin el layout completo --}}
+    @include('adminclientes._content', ['clientes' => $clientes])
+</div>
*** End Patch
*** Begin Patch
*** Add File: resources/views/adminclientes/_content.blade.php
+{{-- resources/views/adminclientes/_content.blade.php --}}
+{{-- Copia aquí el contenido principal de resources/views/adminclientes/index.blade.php (dentro de <x-app-layout>),
+     excluyendo el layout. --}}
*** End Patch
*** Begin Patch
*** Add File: resources/views/adminempresas/_panel.blade.php
+{{-- resources/views/adminempresas/_panel.blade.php --}}
+<div data-title="Empresas">
+    @include('adminempresas._content', ['empresas' => $empresas])
+</div>
*** End Patch
*** Begin Patch
*** Add File: resources/views/adminempresas/_content.blade.php
+{{-- resources/views/adminempresas/_content.blade.php --}}
+{{-- Copia aquí el contenido de resources/views/adminempresas/index.blade.php dentro del layout. --}}
*** End Patch
*** Begin Patch
*** Add File: resources/views/categoria-gastos/_panel.blade.php
+{{-- resources/views/categoria-gastos/_panel.blade.php --}}
+<div data-title="Categorías de Gasto">
+    @include('categoria-gastos._content', ['categorias' => $categorias])
+</div>
*** End Patch
*** Begin Patch
*** Add File: resources/views/categoria-gastos/_content.blade.php
+{{-- resources/views/categoria-gastos/_content.blade.php --}}
+{{-- Copia aquí el contenido de resources/views/categoria-gastos/index.blade.php dentro del layout, excluyendo <x-app-layout>. --}}
*** End Patch
*** Begin Patch
*** Add File: resources/views/subcategoria-gastos/_panel.blade.php
+{{-- resources/views/subcategoria-gastos/_panel.blade.php --}}
+<div data-title="Subcategorías de Gasto">
+    @include('subcategoria-gastos._content', ['subcategorias' => $subcategorias])
+</div>
*** End Patch
*** Begin Patch
*** Add File: resources/views/subcategoria-gastos/_content.blade.php
+{{-- resources/views/subcategoria-gastos/_content.blade.php --}}
+{{-- Copia aquí el contenido de resources/views/subcategoria-gastos/index.blade.php dentro del layout. --}}
*** End Patch
*** Begin Patch
*** Add File: resources/views/categoria-ingresos/_panel.blade.php
+{{-- resources/views/categoria-ingresos/_panel.blade.php --}}
+<div data-title="Categorías de Ingreso">
+    @include('categoria-ingresos._content', ['categorias' => $categorias])
+</div>
*** End Patch
*** Begin Patch
*** Add File: resources/views/categoria-ingresos/_content.blade.php
+{{-- resources/views/categoria-ingresos/_content.blade.php --}}
+{{-- Copia aquí el contenido de resources/views/categoria-ingresos/index.blade.php dentro del layout. --}}
*** End Patch
*** Begin Patch
*** Add File: resources/views/subcategoria-ingresos/_panel.blade.php
+{{-- resources/views/subcategoria-ingresos/_panel.blade.php --}}
+<div data-title="Subcategorías de Ingreso">
+    @include('subcategoria-ingresos._content', ['subs' => $subs])
+</div>
*** End Patch
*** Begin Patch
*** Add File: resources/views/subcategoria-ingresos/_content.blade.php
+{{-- resources/views/subcategoria-ingresos/_content.blade.php --}}
+{{-- Copia aquí el contenido de resources/views/subcategoria-ingresos/index.blade.php dentro del layout. --}}
*** End Patch
*** Begin Patch
*** Add File: resources/views/proveedores/_panel.blade.php
+{{-- resources/views/proveedores/_panel.blade.php --}}
+<div data-title="Proveedores">
+    @include('proveedores._content', [
+        'proveedores' => $proveedores,
+        'search'      => $search,
+        'estado'      => $estado,
+        'orden'       => $orden,
+    ])
+</div>
*** End Patch
*** Begin Patch
*** Add File: resources/views/proveedores/_content.blade.php
+{{-- resources/views/proveedores/_content.blade.php --}}
+{{-- Copia aquí el contenido de resources/views/proveedores/index.blade.php dentro del layout. --}}
*** End Patch
